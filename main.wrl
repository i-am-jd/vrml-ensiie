#VRML V2.0 utf8

#Projet DePoEcK

Group {
    children [
	
		Background {
			leftUrl "models/textures/sky0004.jpg"
			frontUrl "models/textures/sky0005.jpg"
			rightUrl "models/textures/sky0001.jpg"
			backUrl "models/textures/sky0002.jpg"
			topUrl "models/textures/sky0003.jpg"
			bottomUrl "models/textures/sky0006.jpg"
		}

		DEF sun Transform {
			rotation 1 0 0 0
			scaleOrientation 0 1 0 0.25
			center 0 0 10
			translation 30 -5 -10
			scale 4 4 4
			children [
				DEF sunShape Shape {     
					appearance Appearance {
						material Material { emissiveColor 1 1 0.4
											ambientIntensity 1.
											diffuseColor 1 1 0.4
											emissiveColor 1 1 0.4
											specularColor 1 1 0.4
											shininess 1}
					}
					geometry Sphere {}
				},
				DEF sunLight PointLight {
					intensity 1.
					on TRUE
				}
			]
        }
		
		
        

		#Permet de se dplacer sur le terrain
		#en respectant la nivellation
		#Mode NOCLIP off
        NavigationInfo {
            headlight FALSE
            avatarSize [ 0.25,1.5,0.25 ]
        }
                
        Viewpoint {
            position -4 1.1 9
            orientation 0 1 0 -1.57					#rotation selon y de -pi/2
            description "depart"
        }

		
		#forme pour reprer le point 0 0 0 dans le monde
		#la pointe est oriente vers Y (GRIS)
        Transform {                                #position de la forme
            translation  0.0 -3.0 0.0
            children [
                Shape {                        
                    appearance Appearance {
                        material Material {}
                    }
                    geometry Cone {               #forme conique 1*2 metres par defaut
                    }
                }
            ]
        },
		
		#la pointe est oriente vers X (JAUNE)
		Transform {                                #position de la forme
            translation  5.0 -2.0 0.0
			rotation 0.0 0.0 1.0 -1.57
            children [
                Shape {                        
                    appearance Appearance {
                        material Material {
						diffuseColor 1 1 0
						}
                    }
                    geometry Cone {               #forme conique 1*2 metres par defaut
                    }
                }
            ]
        },
	]
}

#DEF yt Transform {
#   translation 2 0 0
#   rotation 0 1 0 0
#   children [
#      Inline {
#	 url ["yt/yt.wrl"]
#      }
#   ]
#}

Transform {
	rotation 0 1 0 -1.57
	scale 6 6 6
	children [ Inline { url "models/terrain.wrl" } ]
}

Transform {
   translation 0 0 0
   rotation 0 1 0 0
   scale 3 3 3
   scaleOrientation 0 1 0 0
   children [
	DEF maison Inline { url ["models/maison.wrl"] },
	Inline { url ["models/porte.wrl"] },
	   Inline { url ["models/win1.wrl"] },
	   Inline { url ["models/win2.wrl"] },
	   Inline { url ["models/win3.wrl"] },
	   Inline { url ["models/win4.wrl"] },
	   Inline { url ["models/win5.wrl"] },
	   Inline { url ["models/win6.wrl"] },
	   Inline { url ["models/win7.wrl"] },
	   Inline { url ["models/win8.wrl"] },
	   Inline { url ["models/win9.wrl"] },
   ]
}

Transform {
   translation -20 0 0	
   rotation 0 1 0 0
   scale 3 3 3
   scaleOrientation 0 1 0 0
   children [
	USE maison,
	Inline { url ["models/porte.wrl"] },
	Inline { url ["models/win1.wrl"] }, Inline { url ["models/win2.wrl"] }, Inline { url ["models/win3.wrl"] }, Inline { url ["models/win4.wrl"] }, Inline { url ["models/win5.wrl"] }, Inline { url ["models/win6.wrl"] }, Inline { url ["models/win7.wrl"] }, Inline { url ["models/win8.wrl"] }, Inline { url ["models/win9.wrl"] }
   ]
}

Transform {
   translation 0 0 21	
   rotation 0 1 0 3.14
   scale 3 3 3
   scaleOrientation 0 1 0 0
   children [
	USE maison,
	Inline { url ["models/porte.wrl"] },
	Inline { url ["models/win1.wrl"] }, Inline { url ["models/win2.wrl"] }, Inline { url ["models/win3.wrl"] }, Inline { url ["models/win4.wrl"] }, Inline { url ["models/win5.wrl"] }, Inline { url ["models/win6.wrl"] }, Inline { url ["models/win7.wrl"] }, Inline { url ["models/win8.wrl"] }, Inline { url ["models/win9.wrl"] }
   ]
}

Transform {
   translation -20 0 21	
   rotation 0 1 0 3.14
   scale 3 3 3
   scaleOrientation 0 1 0 0
   children [
	USE maison,
	Inline { url ["models/porte.wrl"] },
	Inline { url ["models/win1.wrl"] }, Inline { url ["models/win2.wrl"] }, Inline { url ["models/win3.wrl"] }, Inline { url ["models/win4.wrl"] }, Inline { url ["models/win5.wrl"] }, Inline { url ["models/win6.wrl"] }, Inline { url ["models/win7.wrl"] }, Inline { url ["models/win8.wrl"] }, Inline { url ["models/win9.wrl"] }
   ]
}


Transform {
	children [ Inline { url "yt/yt.wrl" } ]
}

Transform {
	translation -18 0 -10
	scale 1. 0.8 1.
	scaleOrientation 0 1 0 0
	children [ DEF tree9 Inline { url "models/tree9.wrl" } ]
}

Transform {
	translation -17 0 -12
	scale 1. 0.8 1.
	scaleOrientation 0 1 0 0
	rotation 0 1 0 2
	children [ USE tree9 ]
}

Transform {
	translation -19 0 -13
	scale 1. 0.8 1.
	scaleOrientation 0 1 0 0
	rotation 0 1 0 2
	children [ USE tree9 ]
}

Transform {
	translation -10 0 0
	scale 0.6 0.6 0.6
	children [ USE tree9 ]
}

Transform {
	scale 0.1 0.1 0.1
	translation -4 0 0
	children [ DEF tree6 Inline { url "models/tree6.wrl" } ]
}

Transform {
	scale 0.1 0.1 0.1
	translation -4 0 -2.5
	children [ USE tree6 ]
}

Transform {
	scale 0.1 0.1 0.1
	translation -4 0 2.5
	children [ USE tree6 ]
}

Transform {
	scale 0.1 0.1 0.1
	translation -16 0 0
	children [ USE tree6 ]
}

Transform {
	scale 0.1 0.1 0.1
	translation -16 0 -2.5
	children [ USE tree6 ]
}

Transform {
	scale 0.1 0.1 0.1
	translation -16 0 2.5
	children [ USE tree6 ]
}

Transform {
	scale 0.1 0.1 0.1
	translation -4 0 18.5
	children [ USE tree6 ]
}

Transform {
	scale 0.1 0.1 0.1
	translation -4 0 21
	children [ USE tree6 ]
}

Transform {
	scale 0.1 0.1 0.1
	translation -4 0 23.5
	children [ USE tree6 ]
}

Transform {
	scale 0.1 0.1 0.1
	translation -16 0 18.5
	children [ USE tree6 ]
}

Transform {
	scale 0.1 0.1 0.1
	translation -16 0 21
	children [ USE tree6 ]
}

Transform {
	scale 0.1 0.1 0.1
	translation -16 0 23.5
	children [ USE tree6 ]
}

Transform {
	scale 2 2 2
	scaleOrientation 0 1 0 0
	translation 20 0 10
	rotation 0 1 0 -1.57
	children [ Inline { url "models/cinema.wrl" },
			   DEF logo_cinema Transform {
					translation 0 0 0
					children [ Inline { url "models/logo_cinema.wrl" } ]
				}
			 ]
}

# Cycle Jour nuit

DEF dayCycleTime TimeSensor {
	cycleInterval 30
	loop TRUE
}

DEF sunRotInterpolator OrientationInterpolator {
	key [0, 0.9, 1]
	keyValue [1 0 0 0, 1 0 0 3.14, 1 0 0 6.28]
}

DEF dayCycleInterp ScalarInterpolator {
	key [0, 0.3, 0.6, 0.9, 1]
	keyValue [0.2, 1, 1, 0.2, 0.2]
}

ROUTE dayCycleTime.fraction_changed TO dayCycleInterp.set_fraction
ROUTE dayCycleInterp.value_changed TO sunLight.set_intensity

ROUTE dayCycleTime.fraction_changed TO sunRotInterpolator.set_fraction
ROUTE sunRotInterpolator.value_changed TO sun.set_rotation

# Déplacement logo cinema

DEF logoTime TimeSensor {
	cycleInterval 1
	loop TRUE
}

DEF logoPosInter PositionInterpolator {
	key [0, 0.25, 0.75, 1]
	keyValue [0 0 0, 0 0.1 0, 0 -0.1 0, 0 0 0]
}

ROUTE logoTime.fraction_changed TO logoPosInter.set_fraction
ROUTE logoPosInter.value_changed TO logo_cinema.set_translation